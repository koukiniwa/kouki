<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>記事インポート</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 40px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 { color: #333; }
    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 20px;
    }
    button:hover { background: #5568d3; }
    #status {
      margin-top: 20px;
      padding: 15px;
      border-radius: 5px;
      display: none;
    }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
    .info { background: #d1ecf1; color: #0c5460; }
  </style>
</head>
<body>
  <div class="container">
    <h1>過去の記事をFirestoreにインポート</h1>
    <p>「インポート開始」ボタンを押すと、過去の記事をすべてFirestoreに登録します。</p>
    <button onclick="importPosts()">インポート開始</button>
    <div id="status"></div>
  </div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyC3qFo-qx2NOsfpmJ1sfUSDMit4ALiqBz4",
      authDomain: "my-blog-98be9.firebaseapp.com",
      projectId: "my-blog-98be9",
      storageBucket: "my-blog-98be9.firebasestorage.app",
      messagingSenderId: "107291416222",
      appId: "1:107291416222:web:0934aee64004a759f9cd8f"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.db = db;
    window.addDoc = addDoc;
    window.collection = collection;
    window.serverTimestamp = serverTimestamp;
  </script>

  <script>
    // 過去の記事データ
    const oldPosts = [
      {
        date: "2025.11.23",
        title: "宣伝の効果",
        paragraphs: [
          "少し前から始めた宣伝ですが、少しずつ効果が出始めてきました。Note記事には4いいねが付き、Xにおいても実際の画面を撮った投稿にリポストや引用してくれるような人もいました。さらに、ネットシティベータで2人がアドバイスをくれました。",
          "ただ、まだ日常の交流のために投稿してくれてる人がいないので、身近に使ってくれるよう宣伝を続けたいと思います。特に実際の画面を投稿することで利用者を惹きつけたいです。"
        ]
      },
      {
        date: "2025.11.22",
        title: "紅葉狩り",
        paragraphs: [
          "今日は高知県の山奥にある鼻鏡というところに紅葉を見に行きました。もみじの紅葉狩りの時期というのがあまり分からなくて少し不安でしたが、行ってみると黄色や赤、オレンジなど様々な葉っぱがあり、とても美しかったです。",
          "四国山地の中ということもあり、崖のような山々と透き通る川があり、四国の豊かな自然を体感できました。来年も紅葉狩りに行きたいと思います。"
        ]
      },
      {
        date: "2025.11.17",
        title: "モネの庭に行った",
        paragraphs: [
          "授業の後、友達とモネの庭に行ってきました。モネの庭は安芸市にある、モネの作品の絵を再現した施設です。",
          "庭園がとても美しく管理されていて、モネの描いた絵と非常に似ていて、その美しさに驚きました。紅葉も綺麗でしたし、特にヨーロッパの地中海を再現したエリアがとても美しく、久しぶりに庭園を見て感動しました。",
          "高知に行く機会のある方は、是非お勧めします！"
        ]
      },
      {
        date: "2025.11.14",
        title: "宣伝開始",
        paragraphs: [
          "本日からネットシティベータのネット宣伝を開始しました！XとNoteでアプリの魅力を発信していきます。",
          "これまで開発に注力してきましたが、多くの方に使っていただくためには宣伝活動も重要だと感じています。SNSを通じて、このアプリの良さを少しずつ広めていきたいと思います。",
          "まだ始まったばかりですが、一人でも多くの方に知っていただけるよう頑張ります！"
        ]
      },
      {
        date: "2025.11.12",
        title: "干し柿を作った",
        paragraphs: [
          "今日、大学の実習で干し柿作りを体験しました。以前家で食べた干し柿はあまり好みではなかったのですが、実際に作る過程を学ぶのは興味深かったです。",
          "実習では柿の皮をむいて、外に干すところまで行いました。これから時間をかけて干すことで、少しずつ干し柿になっていきます。",
          "正直、食べるかどうかは悩ましいところですが、自分で作った干し柿がどのように仕上がるのか見守っていきたいと思います。"
        ]
      },
      {
        date: "2025.11.10",
        title: "話題提供機能の追加",
        paragraphs: [
          "「何か話したいけど話題が思いつかない」「自分から話しかけるのが苦手」という方のために、新しい機能を追加しました。",
          "各カテゴリーごとに3つの話題を自動生成することで、利用者が気軽に会話を始められる環境を整えました。この機能ではAPIを活用したAI技術を導入しており、無料枠で運用できるため、コスト面でも優れた改善となりました。",
          "会話のきっかけ作りをサポートすることで、より多くの方に快適にアプリを利用していただければと思います。"
        ]
      },
      {
        date: "2025.11.09",
        title: "安全性の向上",
        paragraphs: [
          "アプリ内で発言したすべてのユーザーのコメントをIPアドレスと紐づけて管理するようにしました。",
          "これにより、何らかのトラブルが発生した際も迅速に対応できる体制が整いました。匿名性を維持しながらも、安心して利用できる環境づくりを目指しています。"
        ]
      },
      {
        date: "2025.11.08",
        title: "20歳の誕生日",
        paragraphs: [
          "20歳の誕生日を迎えることができました。とても大きな節目だと思います。自分が100歳まで生きると考えると、1/5が終わったことになります。",
          "大人になると時間の経過が早いと感じるようになると言われていますが、もうすでに感じています。ですので、一日一日を大切にして充実した日々を送っていきたいと思います。",
          "また、20歳という日に合わせてこのサイトのデザインも大人っぽくなりました。今後ともよろしくお願いします。"
        ]
      },
      {
        date: "2025.11.07",
        title: "匿名アプリの難しさ",
        paragraphs: [
          "現在、匿名チャットのWebアプリを開発していますが、最も大きな課題は安全性の確保です。",
          "日本の匿名アプリで最も大きなシェアを誇っていた「2ちゃんねる」では、匿名であるがゆえに多くの誹謗中傷のコメントや犯罪予告などの不適切発言が問題視され、創設者の西村博之さんへの多額の賠償請求が発生する事態となってしまいました。",
          "自分のアプリも入室時に個人情報を書く必要がなく、現在のところ安全性への整備が甘いということは認識しています。利用者が増加するにつれてこういった整備も難しくなってしまうので、早い段階で対策を行いたいと考えています。"
        ]
      },
      {
        date: "2025.11.05",
        title: "デザイン変更",
        paragraphs: [
          "ネットシティベータのウェブアプリのデザインを大幅に変更しました。今まではインスタグラムのリール形式でしたが、それでは見づらいと感じ、ヤフーニュースのアプリのようなデザインに変更しました。",
          "これでルーム数が多くなってもカテゴリーごとに分類でき、ルームを見つけやすくなりました。より使いやすいデザインに今後も改善を加えていきたいと思います。"
        ]
      },
      {
        date: "2025.11.02",
        title: "苗植え",
        paragraphs: [
          "農学部の実習の一環として冬野菜を育てることになりました。2月までに収穫可能な野菜しか育てられないということもあり、今回は苗から育てることにしました。",
          "ネギとレタスの苗を3つずつ、白菜の苗を4つ、カリフラワーの苗を1つ植えました。日曜日だったので時間があり、土をしっかり耕して丁寧に畝を作りました。他の人の畑と比べてもきれいに仕上がったと思います。",
          "特にカリフラワーは収穫まで3か月かかり間に合うかどうか不安ですが収穫が楽しみです！"
        ]
      },
      {
        date: "2025.10.29",
        title: "リアクション機能の追加と今後の課題",
        paragraphs: [
          "リアクション機能が追加されました。バッドボタンを入れないことで、より質の良い会話を目指しています。",
          "一方で、24時間でメッセージが消えるシステムについてはエラーが発生しており、メッセージが消えていない状況です。早急に解決したい課題です。",
          "また、複数の部屋を作れるようにするシステムもバックエンドのエラーで実装できていません。こちらも解決していきたいと思います。"
        ]
      },
      {
        date: "2025.10.28",
        title: "ネットシティベータの未来",
        paragraphs: [
          "「ネットシティベータ」は、日本中のユーザーが仮想空間でリアルタイムに交流できる次世代コミュニケーションアプリです。未来的な街並みを舞台に、まるでそこに居るかのような臨場感ある会話体験を提供します。",
          "今後の開発方針",
          "スケーラビリティの強化：利用者の増加に対応し、快適な会話環境を維持するため、サーバーインフラとUI/UXの継続的な改善を行います。",
          "世界観の深化：「仮想都市」というコンセプトをより鮮明にし、没入感の高い空間デザインを追求します。",
          "アクセシビリティの向上：SNSを活用したプロモーション展開と、iOS/Androidアプリストアでの配信を予定しています。",
          "安心・安全な運営：収益化モデルの確立と並行して、ユーザーの安全性を最優先とした運営体制を構築します。モデレーション機能の強化、プライバシー保護、利用規約の整備など、健全なコミュニティ形成に全力で取り組んでまいります。"
        ]
      },
      {
        date: "2025.10.27",
        title: "ネットシティベータのウェブ版公開！",
        paragraphs: [
          "ネットシティベータというアプリのウェブ版が公開されました！ぜひ使ってみてください！",
          "サイトはこちら: https://net-city-beta.web.app/html/city.html",
          "今後さらなる機能の追加とアンドロイドでのアプリの公開を予定しています。こうご期待！"
        ]
      },
      {
        date: "2025.10.02",
        title: "夏休み終わり　後期開始",
        paragraphs: [
          "2か月近くあった夏休みもあっというまに終わってしまい新学期が始まりました。今思うと今年の夏休みは両方の祖父母といとこに会い、3回サッカー観戦をし、2回の万博と室戸市、白川郷に行くなど多くの楽しい経験をしました。アルバイトもして去年よりもはるかに充実した夏休み期間だったと感じます。",
          "さて、今学期はオンラインが2つありますが1限は週3回もあります。段々と寒くなってきて朝起きるのが大変になってきてしまいそうですが、気合を入れて間に合うようにしたいです。"
        ]
      },
      {
        date: "2025.09.17",
        title: "大阪・関西万博2025に行ってきた(2回目）!!",
        paragraphs: [
          "9月17日と18日の2日間でまたしても大阪万博に行ってきました!万博は地理が好きな僕にとってとても面白い場所だったためもう一度行こうということになりました。",
          "待ち時間が比較的短いということもあり今回は中東や中央アジアなどに位置するあまりなじみのない国に多くいきました。特に印象的だったのはトルクメニスタンです。中央アジアの北朝鮮と言われるだけあって大統領の肖像画が入り口にあるのが衝撃的でした。パビリオンはとても豪華で、首都には大理石でできた白色の建物が立ち並ぶんだとか。天然ガスなどの資源が豊かな国であることを感じさせられます。特徴的な国すぎてキーホルダーを買ってしまいました。大切にしたいです。",
          "抽選で当たった未来の都市パビリオンと三菱未来館にも行きました。様々な企業が未来を考え新しい技術の開発を行っており未来にワクワクさせられました。特に川崎重工業の四足歩行の乗り物がかっこよかったです。ぜひ調べて見てください!",
          "万博はとても好奇心を搔き立てられます。次は2027年に横浜で花博があるそうなのでそちらも行きたいです"
        ]
      },
      {
        date: "2025.09.07",
        title: "大阪・関西万博2025に行ってきた！",
        paragraphs: [
          "9月6日と7日の2日間で、大阪・関西万博に行ってきました！まず最初に感じたのは、万博の人の多さと規模の大きさです。想像していた以上にスケールが大きく、到着した瞬間に圧倒されました。",
          "土日ということもあってとても混雑していて、どのパビリオンに入るにも長い列に並ぶ必要がありました。でも、待った甲斐は十分にありました！どこのパビリオンもそれぞれ特徴的で、地理が好きな僕にとってはまさにサイコーの体験でした。",
          "特に印象的だったのはアメリカ館です。ロケットで宇宙に行く体験ができるシミュレーションが本当にリアルで、まるで実際に宇宙飛行士になったような感覚でした。宇宙から地球を見下ろす映像は鳥肌が立つほど美しく、絶対におすすめのパビリオンです！",
          "命の未来パビリオンでは、最新のアンドロイド技術を間近で見ることができ、未来について深く考えさせられました。アンドロイドの技術の進歩は目覚ましいものがありましたが、同時に「アンドロイドが普及したら人間との共生が難しい問題になるだろうな」とも感じました。技術の進歩と人間社会の調和について、改めて考える良い機会になりました。",
          "2日間では全てを回りきれないほど盛りだくさんの内容で、最先端の技術や世界各国の文化に触れることができました。また必ず訪れたいと思える、本当に素晴らしい万博でした！"
        ]
      },
      {
        date: "2025.09.03",
        title: "白川郷で古き良き日本の夏を体験",
        paragraphs: [
          "名古屋から白川郷へ日帰り旅行に行ってきました！バスで約2時間50分の道のりでしたが、到着した瞬間に別世界に来たような感覚になりました。",
          "白川郷に着くとセミの鳴き声が響いていて、名古屋よりも少し涼しく感じられました。合掌造りの茅葺き屋根の建物群を眺めながら歩いていると、まさに「古き良き日本の夏」を肌で感じることができました。",
          "帰る前には、合掌造りの建物をリノベーションした「落人」という喫茶店に立ち寄りました。古い建物の雰囲気を活かした落ち着いた空間で、注文したゆずジュースが本当に美味しかった！"
        ]
      },
      {
        date: "2025.08.31",
        title: "トヨタスタジアムサイコー！",
        paragraphs: [
          "名古屋グランパス対FC東京の試合をトヨタスタジアムで観戦してきました！J1のサッカーの試合を見るのは初めてだったのですが、想像以上の迫力と興奮でした。",
          "まず驚いたのは観客席の角度の急さ。すり鉢状になったスタジアムのおかげで、どの席からでもピッチが近く感じられて、臨場感が半端ありませんでした。",
          "肝心の試合は惜しくも同点でしたが、90分間ずっと手に汗握る熱い戦いでした。また別の試合も絶対に見に行きたいと思います！"
        ]
      },
      {
        date: "2025.08.18",
        title: "愛車の洗車",
        paragraphs: [
          "半年間ほとんど洗車をせず、外の駐車場に置きっぱなしだった愛車を、ついに洗車機に通しました。長い間たまった汚れが一気に落ちてピカピカになり、まるで新車のようで感動！",
          "正直、初めて洗車機に車を入れるときは「ちゃんと真っ直ぐ止められるかな…」と少し怖かったですが、実際にやってみるととても簡単。これからはもっと気軽に利用して愛車をきれいに保とうと思います。"
        ]
      },
      {
        date: "2025.08.16",
        title: "香川でうどんを食べた",
        paragraphs: [
          "香川県の石川うどんでぶっかけうどんとプリンを食べました！うどんはものすごく腰があって、さすが本場の讃岐うどんだなと感動しました。一緒に頼んだプリンが想像以上に濃厚で、なめらかな舌触りと深いコクが最高においしかったです。"
        ]
      }
    ];

    async function importPosts() {
      const statusDiv = document.getElementById('status');
      statusDiv.className = 'info';
      statusDiv.style.display = 'block';
      statusDiv.textContent = 'インポート中...';

      let successCount = 0;
      let errorCount = 0;

      for (const post of oldPosts) {
        try {
          await window.addDoc(window.collection(window.db, 'posts'), {
            date: post.date,
            title: post.title,
            paragraphs: post.paragraphs,
            image: null,
            createdAt: window.serverTimestamp(),
            month: post.date.substring(0, 7)
          });
          successCount++;
          statusDiv.textContent = `インポート中... (${successCount}/${oldPosts.length})`;
        } catch (error) {
          console.error('エラー:', error);
          errorCount++;
        }
      }

      if (errorCount === 0) {
        statusDiv.className = 'success';
        statusDiv.textContent = `完了！${successCount}件の記事をインポートしました。`;
      } else {
        statusDiv.className = 'error';
        statusDiv.textContent = `完了（成功: ${successCount}件、失敗: ${errorCount}件）`;
      }
    }

    window.importPosts = importPosts;
  </script>
</body>
</html>
