<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¸¹ç¾½åº·æ®</title>

  <!-- PWAè¨­å®š -->
  <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="ä¸¹ç¾½åº·æ®">
  <link rel="stylesheet" href="styles.css">

<meta name="description" content="ä¸¹ç¾½åº·æ®ã®å€‹äººãƒ–ãƒ­ã‚°ã€‚è¾²å­¦ã€å®‡å®™ç”£æ¥­ã€AIã€ã‚¢ãƒ—ãƒªé–‹ç™ºãªã©ã«ã¤ã„ã¦ç™ºä¿¡ã—ã¦ã„ã¾ã™ã€‚20ã®è¨˜äº‹ã‚’æ²è¼‰ã€‚">
<meta name="keywords" content="ä¸¹ç¾½åº·æ®, ãƒ–ãƒ­ã‚°, å€‹äººãƒ–ãƒ­ã‚°, è¾²å­¦, è¾²å­¦éƒ¨, AI, å®‡å®™ç”£æ¥­, æ—…è¡Œ, ä¸‡åš, å¤§å­¦ç”Ÿ, æ—¥è¨˜">
<meta name="author" content="ä¸¹ç¾½åº·æ®">

<!-- OGP (SNSã‚·ã‚§ã‚¢ç”¨) -->
<meta property="og:title" content="ä¸¹ç¾½åº·æ® - è¾²å­¦éƒ¨ç”Ÿã®ãƒ–ãƒ­ã‚°">
<meta property="og:description" content="æ¥½ã—ãç”Ÿæ´»ã—ã¦ã„ã‚‹ä¸¹ç¾½åº·æ®ã®å‹•å‘ã‚„ç”Ÿæ´»ã«ã¤ã„ã¦ç™ºä¿¡ã—ã¦ã„ãã¾ã™">
<meta property="og:type" content="website">
<meta property="og:url" content="https://ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å.github.io/ãƒªãƒã‚¸ãƒˆãƒªå/">
<meta property="og:image" content="https://ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å.github.io/ãƒªãƒã‚¸ãƒˆãƒªå/og-image.jpg">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ä¸¹ç¾½åº·æ® - è¾²å­¦éƒ¨ç”Ÿã®ãƒ–ãƒ­ã‚°">
<meta name="twitter:description" content="æ¥½ã—ãç”Ÿæ´»ã—ã¦ã„ã‚‹ä¸¹ç¾½åº·æ®ã®å‹•å‘ã‚„ç”Ÿæ´»ã«ã¤ã„ã¦ç™ºä¿¡ã—ã¦ã„ãã¾ã™">

</head>
<body>
  <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h1>ä¸¹ç¾½åº·æ®</h1>
      <p class="subtitle">Kouki Niwa</p>
    </div>

    <nav class="sidebar-nav">
      <a href="#nov-2025" class="nav-link">2025å¹´11æœˆ</a>
      <a href="#sep-2025" class="nav-link">2025å¹´9æœˆ</a>
      <a href="#aug-2025" class="nav-link">2025å¹´8æœˆ</a>
    </nav>

    <div class="sidebar-social">
      <a href="https://instagram.com/kouki__n" target="_blank" class="social-icon" title="Instagram">ğŸ“·</a>
      <a href="https://note.com/natty_cobra963" target="_blank" class="social-icon" title="Note">ğŸ“</a>
      <a href="https://net-city-beta.web.app/html/city.html" target="_blank" class="social-icon" title="NetCity Beta">ğŸŒ</a>
      <a href="aikouki/index.html" class="social-icon" title="AIã“ã†ãã¨è©±ã™">ğŸ¤–</a>
    </div>
  </aside>

  <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="mobile-header">
    <h1>ä¸¹ç¾½åº·æ®</h1>
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">â˜°</button>
  </header>

  <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
  <nav class="mobile-nav" id="mobileNav">
    <a href="#nov-2025" class="nav-link" onclick="closeMobileMenu()">2025å¹´11æœˆ</a>
    <a href="#oct-2025" class="nav-link" onclick="closeMobileMenu()">2025å¹´10æœˆ</a>
    <a href="#sep-2025" class="nav-link" onclick="closeMobileMenu()">2025å¹´9æœˆ</a>
    <a href="#aug-2025" class="nav-link" onclick="closeMobileMenu()">2025å¹´8æœˆ</a>
  </nav>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <main class="main-content">
    <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section class="hero-section">
      <div class="hero-image">
        <img src="https://lh3.googleusercontent.com/pw/AP1GczMfN9SWUtNZuB4PGdOOE0p0lZxsAQOm_uWBcyXQLFBfH9pF4_pc7Xx7PA1_wTlXwLEo_AiyPBbPRWccRi7LVoTcb9VUi_1vF-3PK1a9WwvbZvZRQNCdrmN8-vmxnossndP-XcojFlRQdB2QpUP5wIna=w1197-h898-s-no-gm?authuser=0" alt="ä¸¹ç¾½åº·æ®">
        <div class="hero-overlay"></div>
      </div>
      <div class="hero-content">
        <p class="hero-subtitle">è¾²å­¦ã€å®‡å®™ç”£æ¥­ã€AIã€ã‚¢ãƒ—ãƒªé–‹ç™ºã€‚20æ­³ãŒæ¢æ±‚ã™ã‚‹æœªæ¥ã®ä¸–ç•Œã€‚</p>
        <a href="#blog-posts" class="hero-cta">è¨˜äº‹ã‚’èª­ã‚€</a>
      </div>
    </section>

    <!-- ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªãƒ³ã‚¯ -->
    <section class="social-links-section">
      <h2 class="section-header">ã¤ãªãŒã‚‹</h2>
      <div class="social-cards-grid">

        <a href="aikouki/index.html" class="social-card ai-card">
          <div class="social-card-icon">ğŸ¤–</div>
          <div class="social-card-content">
            <h3>AIã“ã†ã</h3>
            <p>ç§ã®AIã‚¢ãƒã‚¿ãƒ¼ã¨ä¼šè©±ã§ãã¾ã™</p>
          </div>
          <div class="social-card-arrow">â†’</div>
        </a>

        <a href="https://instagram.com/kouki__n" target="_blank" class="social-card instagram-card">
          <div class="social-card-icon">ğŸ“·</div>
          <div class="social-card-content">
            <h3>Instagram</h3>
            <p>æ—¥å¸¸ã®å†™çœŸã‚„æ—…ã®è¨˜éŒ²ã‚’æŠ•ç¨¿ã—ã¦ã„ã¾ã™</p>
          </div>
          <div class="social-card-arrow">â†’</div>
        </a>

        <a href="https://note.com/natty_cobra963" target="_blank" class="social-card note-card">
          <div class="social-card-icon">ğŸ“</div>
          <div class="social-card-content">
            <h3>Note</h3>
            <p>é•·æ–‡è¨˜äº‹ã‚„ã‚¨ãƒƒã‚»ã‚¤ã‚’åŸ·ç­†ä¸­</p>
          </div>
          <div class="social-card-arrow">â†’</div>
        </a>

        <a href="https://net-city-beta.web.app/html/city.html" target="_blank" class="social-card netcity-card">
          <div class="social-card-icon">ğŸŒ</div>
          <div class="social-card-content">
            <h3>NetCity Beta</h3>
            <p>é–‹ç™ºä¸­ã®Webãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</p>
          </div>
          <div class="social-card-arrow">â†’</div>
        </a>

      </div>
    </section>

    <!-- ãƒ–ãƒ­ã‚°ã«ã¤ã„ã¦ -->
    <div class="blog-description">
      <h2>ãƒ–ãƒ­ã‚°ã«ã¤ã„ã¦</h2>
      <p>ä¸¹ç¾½åº·æ®ã®ãƒ–ãƒ­ã‚°ã¸ã‚ˆã†ã“ãã€‚è¾²å­¦éƒ¨ç”Ÿã¨ã—ã¦ã€è¾²æ¥­æŠ€è¡“ã€å®‡å®™ç”£æ¥­ã€AIã€ã‚¢ãƒ—ãƒªé–‹ç™ºãªã©ã®å¹…åºƒã„ãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦ç™ºä¿¡ã—ã¦ã„ã¾ã™ã€‚</p>
      <p>ç¾åœ¨20ã®è¨˜äº‹ã‚’æ²è¼‰ã—ã¦ãŠã‚Šã€å®šæœŸçš„ã«æ–°ã—ã„è¨˜äº‹ã‚’æ›´æ–°ä¸­ã§ã™ã€‚</p>
    </div>

    <!-- è¨˜äº‹ä¸€è¦§ï¼ˆFirestoreã‹ã‚‰å‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ï¼‰ -->
    <div id="blog-posts">
      <div id="blogPosts">
        <p style="text-align: center; padding: 50px; color: #888;">è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
      </div>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="main-footer">
      <div class="footer-links">
        <a href="https://instagram.com/kouki__n" target="_blank">Instagram</a>
        <a href="https://note.com/natty_cobra963" target="_blank">Note</a>
      </div>
      <p class="copyright">Â© 2025 Kouki Niwa. All rights reserved.</p>
    </footer>
  </main>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, query, orderBy, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    // Firebaseè¨­å®š
    const firebaseConfig = {
      apiKey: "AIzaSyC3qFo-qx2NOsfpmJ1sfUSDMit4ALiqBz4",
      authDomain: "my-blog-98be9.firebaseapp.com",
      projectId: "my-blog-98be9",
      storageBucket: "my-blog-98be9.firebasestorage.app",
      messagingSenderId: "107291416222",
      appId: "1:107291416222:web:0934aee64004a759f9cd8f"
    };

    // FirebaseåˆæœŸåŒ–
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä»˜ãPromise
    function withTimeout(promise, ms) {
      const timeout = new Promise((_, reject) =>
        setTimeout(() => reject(new Error('ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ')), ms)
      );
      return Promise.race([promise, timeout]);
    }

    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€
    function loadFromCache() {
      try {
        const cached = localStorage.getItem('blogPostsCache');
        if (cached) {
          const data = JSON.parse(cached);
          // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒ24æ™‚é–“ä»¥å†…ãªã‚‰ä½¿ç”¨
          if (Date.now() - data.timestamp < 24 * 60 * 60 * 1000) {
            return data.posts;
          }
        }
      } catch (e) {
        console.error('ã‚­ãƒ£ãƒƒã‚·ãƒ¥èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e);
      }
      return null;
    }

    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
    function saveToCache(postsByMonth) {
      try {
        localStorage.setItem('blogPostsCache', JSON.stringify({
          posts: postsByMonth,
          timestamp: Date.now()
        }));
      } catch (e) {
        console.error('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜ã‚¨ãƒ©ãƒ¼:', e);
      }
    }

    // è¨˜äº‹ã‚’èª­ã¿è¾¼ã‚€ï¼ˆæ”¹å–„ç‰ˆãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãï¼‰
    async function loadPosts(retryCount = 0) {
      const maxRetries = 3;
      const blogPostsContainer = document.getElementById('blogPosts');
      // æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•: 1ç§’ â†’ 3ç§’ â†’ 5ç§’
      const retryDelays = [1000, 3000, 5000];

      try {
        // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä»˜ãã§Firestoreã‹ã‚‰å–å¾—ï¼ˆ10ç§’ï¼‰
        const postsQuery = query(collection(db, 'posts'), orderBy('date', 'desc'));
        const querySnapshot = await withTimeout(getDocs(postsQuery), 10000);

        // æœˆã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
        const postsByMonth = {};

        querySnapshot.forEach((doc) => {
          const data = doc.data();
          const month = data.month || data.date.substring(0, 7); // "2025.11"

          if (!postsByMonth[month]) {
            postsByMonth[month] = [];
          }

          postsByMonth[month].push(data);
        });

        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜
        saveToCache(postsByMonth);

        // HTMLã‚’ç”Ÿæˆã—ã¦è¡¨ç¤º
        renderPosts(postsByMonth);

      } catch (error) {
        console.error('è¨˜äº‹ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);

        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰èª­ã¿è¾¼ã¿ã‚’è©¦è¡Œ
        const cachedPosts = loadFromCache();
        if (cachedPosts && retryCount === 0) {
          console.log('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¾ã™');
          renderPosts(cachedPosts);
          blogPostsContainer.insertAdjacentHTML('afterbegin',
            '<div id="cacheWarning" style="background: #fff3cd; padding: 15px; margin-bottom: 20px; border-radius: 5px; text-align: center; color: #856404;">' +
            '<p style="margin: 0 0 10px 0;">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å†è©¦è¡Œä¸­...</p>' +
            '<button onclick="retryLoadPosts()" style="padding: 8px 16px; background: #856404; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">ä»Šã™ãå†èª­ã¿è¾¼ã¿</button>' +
            '</div>'
          );
          // ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å†è©¦è¡Œ
          setTimeout(() => loadPosts(retryCount + 1), retryDelays[retryCount] || 5000);
          return;
        }

        // ãƒªãƒˆãƒ©ã‚¤
        if (retryCount < maxRetries) {
          const delay = retryDelays[retryCount] || 5000;
          console.log(`ãƒªãƒˆãƒ©ã‚¤ä¸­... (${retryCount + 1}/${maxRetries}) - ${delay}mså¾Œ`);
          blogPostsContainer.innerHTML = `
            <div style="text-align: center; padding: 50px;">
              <p style="color: #888; margin-bottom: 15px;">èª­ã¿è¾¼ã¿ä¸­... (å†è©¦è¡Œ ${retryCount + 1}/${maxRetries})</p>
              <button onclick="retryLoadPosts()" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">ä»Šã™ãå†èª­ã¿è¾¼ã¿</button>
            </div>`;
          setTimeout(() => loadPosts(retryCount + 1), delay);
        } else {
          // å…¨ã¦ã®ãƒªãƒˆãƒ©ã‚¤ãŒå¤±æ•—ã—ãŸå ´åˆã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ€å¾Œã®æ‰‹æ®µã¨ã—ã¦è©¦ã™
          const cachedPosts = loadFromCache();
          if (cachedPosts) {
            console.log('å…¨ã¦ã®ãƒªãƒˆãƒ©ã‚¤ãŒå¤±æ•—ã€‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¾ã™');
            renderPosts(cachedPosts);
            blogPostsContainer.insertAdjacentHTML('afterbegin',
              '<div style="background: #f8d7da; padding: 15px; margin-bottom: 20px; border-radius: 5px; text-align: center; color: #721c24;">' +
              '<p style="margin: 0 0 10px 0;">æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚</p>' +
              '<button onclick="retryLoadPosts()" style="padding: 8px 16px; background: #721c24; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">å†èª­ã¿è¾¼ã¿</button>' +
              '</div>'
            );
          } else {
            blogPostsContainer.innerHTML = `
              <div style="text-align: center; padding: 50px;">
                <p style="margin-bottom: 15px; color: #dc3545;">è¨˜äº‹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>
                <p style="margin-bottom: 15px; color: #666; font-size: 14px;">ã‚¨ãƒ©ãƒ¼: ${error.message}</p>
                <button onclick="retryLoadPosts()" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">å†èª­ã¿è¾¼ã¿</button>
              </div>`;
          }
        }
      }
    }

    // è¨˜äº‹ã‚’HTMLã«å¤‰æ›ã—ã¦è¡¨ç¤º
    function renderPosts(postsByMonth) {
      const blogPostsContainer = document.getElementById('blogPosts');

      // HTMLã‚’ç”Ÿæˆ
      let html = '';

      // æœˆã”ã¨ã«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
      Object.keys(postsByMonth).sort().reverse().forEach(month => {
        const monthName = convertMonthName(month);
        const monthId = month.replace('.', '-');

        html += `
          <section id="${monthId}" class="blog-section">
            <h2 class="section-title">${monthName}</h2>
        `;

        // ãã®æœˆã®è¨˜äº‹ã‚’è¿½åŠ 
        postsByMonth[month].forEach(post => {
          html += `
            <article class="blog-post">
          `;

          // ç”»åƒãŒã‚ã‚‹å ´åˆã€è¨˜äº‹ã®ä¸Šéƒ¨ã«å¤§ããè¡¨ç¤º
          if (post.image) {
            html += `
              <div class="post-featured-image">
                <img src="${post.image}" alt="${post.title}" loading="lazy">
              </div>
            `;
          }

          html += `
              <div class="post-content">
                <time class="post-date">${post.date}</time>
                <h3>${post.title}</h3>
          `;

          // æ®µè½ã‚’è¿½åŠ 
          post.paragraphs.forEach(paragraph => {
            html += `<p>${paragraph}</p>`;
          });

          html += `
              </div>
            </article>
          `;
        });

        html += `</section>`;
      });

      blogPostsContainer.innerHTML = html;

      // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
      updateNavigation(Object.keys(postsByMonth).sort().reverse());
    }

    // æœˆåã‚’æ—¥æœ¬èªã«å¤‰æ›
    function convertMonthName(month) {
      const year = month.split('.')[0];
      const monthNum = month.split('.')[1];
      return `${year}å¹´${parseInt(monthNum)}æœˆ`;
    }

    // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
    function updateNavigation(months) {
      const sidebarNav = document.querySelector('.sidebar-nav');
      const mobileNav = document.querySelector('.mobile-nav');

      // æ—¢å­˜ã®ãƒªãƒ³ã‚¯ã‚’å‰Šé™¤
      sidebarNav.querySelectorAll('.nav-link').forEach(link => link.remove());
      mobileNav.querySelectorAll('.nav-link').forEach(link => link.remove());

      // æ–°ã—ã„ãƒªãƒ³ã‚¯ã‚’è¿½åŠ 
      months.forEach(month => {
        const monthName = convertMonthName(month);
        const monthId = month.replace('.', '-');

        const sidebarLink = document.createElement('a');
        sidebarLink.href = `#${monthId}`;
        sidebarLink.className = 'nav-link';
        sidebarLink.textContent = monthName;
        sidebarNav.appendChild(sidebarLink);

        const mobileLink = document.createElement('a');
        mobileLink.href = `#${monthId}`;
        mobileLink.className = 'nav-link';
        mobileLink.textContent = monthName;
        mobileLink.onclick = closeMobileMenu;
        mobileNav.appendChild(mobileLink);
      });
    }

    // æ‰‹å‹•ã§å†èª­ã¿è¾¼ã¿ã™ã‚‹é–¢æ•°
    window.retryLoadPosts = function() {
      const blogPostsContainer = document.getElementById('blogPosts');
      blogPostsContainer.innerHTML = '<p style="text-align: center; padding: 50px; color: #888;">è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>';
      // è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤
      const warning = document.getElementById('cacheWarning');
      if (warning) {
        warning.remove();
      }
      // æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™
      loadPosts(0);
    };

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è¨˜äº‹ã‚’å–å¾—
    loadPosts();
  </script>

  <script>
    // ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼
    function toggleMobileMenu() {
      const mobileNav = document.getElementById('mobileNav');
      mobileNav.classList.toggle('active');
    }

    function closeMobileMenu() {
      const mobileNav = document.getElementById('mobileNav');
      mobileNav.classList.remove('active');
    }

    // ãƒ¡ãƒ‹ãƒ¥ãƒ¼å¤–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰é–‰ã˜ã‚‹
    document.addEventListener('click', function(event) {
      const mobileNav = document.getElementById('mobileNav');
      const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
      const mobileHeader = document.querySelector('.mobile-header');

      // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‹ã„ã¦ã„ã‚‹å ´åˆã®ã¿å‡¦ç†
      if (mobileNav && mobileNav.classList.contains('active')) {
        // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´æ‰€ãŒãƒ¡ãƒ‹ãƒ¥ãƒ¼å†…ã§ã‚‚ãƒ˜ãƒƒãƒ€ãƒ¼å†…ã§ã‚‚ãªã„å ´åˆ
        if (!mobileNav.contains(event.target) && !mobileHeader.contains(event.target)) {
          closeMobileMenu();
        }
      }
    });

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’éš ã™
    let lastScrollTop = 0;
    const mobileHeader = document.querySelector('.mobile-header');
    const mobileNav = document.getElementById('mobileNav');

    window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

      // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ–¹å‘ã‚’åˆ¤å®š
      if (scrollTop > lastScrollTop && scrollTop > 100) {
        // ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆ100pxä»¥ä¸Šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãŸå ´åˆï¼‰
        if (mobileHeader) {
          mobileHeader.classList.add('hidden');
          // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‹ã„ã¦ã„ã‚‹å ´åˆã¯é–‰ã˜ã‚‹
          if (mobileNav && mobileNav.classList.contains('active')) {
            closeMobileMenu();
          }
        }
      } else {
        // ä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        if (mobileHeader) {
          mobileHeader.classList.remove('hidden');
        }
      }

      lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;

      // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒªãƒ³ã‚¯ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
      const sections = document.querySelectorAll('section[id]');
      const navLinks = document.querySelectorAll('.nav-link');

      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        if (scrollTop >= sectionTop - 200) {
          current = section.getAttribute('id');
        }
      });

      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
          link.classList.add('active');
        }
      });
    });
  </script>
</body>
</html>
